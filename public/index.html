<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HoneyPixelMC - Blocky Adventures Await</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="https://honeypixelmc.com/favicon.ico" />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=AWhTexu2paInr5MSskUleb9RBE5rbSP3Rbwdcbxm8feY6XmT7dcSlowYD-wuny6WmNPIlz3MiXvgfOPn&currency=USD"></script>
   <!--- SEO --->
    <meta name="description" content="HoneyPixelMC - Cozy Minecraft survival with economy, events, and community.">
    <meta name="keywords" content="Minecraft, server, survival, economy, lifesteal, HoneyPixelMC">
    <meta name="author" content="ChickenWithACrown">
    <meta property="og:title" content="HoneyPixelMC - Blocky Adventures Await">
    <meta property="og:description" content="Join our friendly Minecraft server with survival, shops, and minigames.">
    <meta property="og:image" content="https://honeypixelmc.com/logo.png">
    <meta property="og:url" content="https://honeypixelmc.com">
    <meta name="theme-color" content="#facc15">

    <style>
    body {
    background-color: var(--bg-color);
    color: var(--text-color);
    font-family: 'Segoe UI', sans-serif;
}

.minecraft-font {
    font-family: 'Press Start 2P', cursive;
}
    .pixel-border {
        border: 4px solid;
        border-image: url("data:image/svg+xml,%3csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cpattern id='a' patternUnits='userSpaceOnUse' width='10' height='10'%3e%3cpath d='M0 0h5v5H0zm5 5h5v5H5z' fill='%23000'/%3e%3c/pattern%3e%3c/defs%3e%3cpath fill='url(%23a)' d='M0 0h100v100H0z'/%3e%3c/svg%3e") 4;
    }

    .minecraft-block {
        background: linear-gradient(135deg, #8b4513 0%, #654321 50%, #4a2c17 100%);
        border: 2px solid #2d1810;
        box-shadow: inset 2px 2px 4px rgba(255,255,255,0.3), inset -2px -2px 4px rgba(0,0,0,0.3);
    }

    .grass-block {
        background: linear-gradient(to bottom, #7cb342 0%, #7cb342 20%, #8d6e63 20%, #8d6e63 100%);
        border: 2px solid #4a5d23;
    }

    .stone-block {
        background: linear-gradient(135deg, #757575 0%, #616161 50%, #424242 100%);
        border: 2px solid #303030;
    }

    .gold-block {
        background: linear-gradient(135deg, #ffd700 0%, #ffc107 50%, #ff8f00 100%);
        border: 2px solid #e65100;
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .diamond-block {
        background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 50%, #0288d1 100%);
        border: 2px solid #01579b;
        box-shadow: 0 0 15px rgba(79, 195, 247, 0.6);
    }

    .emerald-block {
        background: linear-gradient(135deg, #4caf50 0%, #388e3c 50%, #2e7d32 100%);
        border: 2px solid #1b5e20;
        box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
    }

    .btn-minecraft {
        background: linear-gradient(to bottom, #8d6e63 0%, #5d4037 100%);
        border: 3px solid #3e2723;
        color: white;
        text-shadow: 2px 2px 0px #000;
        transition: all 0.1s ease;
    }

    .btn-minecraft:hover {
        background: linear-gradient(to bottom, #a1887f 0%, #6d4c41 100%);
        transform: translateY(-2px);
    }

    .btn-minecraft:active {
        transform: translateY(0px);
        box-shadow: inset 0 3px 5px rgba(0,0,0,0.3);
    }

    .pixelated {
        image-rendering: pixelated;
        image-rendering: -moz-crisp-edges;
        image-rendering: crisp-edges;
    }

    .minecraft-inventory {
        background: #c6c6c6;
        border: 3px solid #000;
        box-shadow: inset 3px 3px 0px #fff, inset -3px -3px 0px #5a5a5a;
    }

    .inventory-slot {
        width: 36px;
        height: 36px;
        background: #8b8b8b;
        border: 2px solid #000;
        box-shadow: inset 2px 2px 0px #fff, inset -2px -2px 0px #5a5a5a;
    }

    .health-bar {
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Cpath fill='%23ff0000' d='M10 17l-5.878-3.09A6 6 0 0 1 2 8.5C2 5.462 4.462 3 7.5 3c1.636 0 3.09.794 4 2.022A4.994 4.994 0 0 1 15.5 3C18.538 3 21 5.462 21 8.5a6 6 0 0 1-2.122 4.59L10 17z'/%3E%3C/svg%3E") repeat-x;
    }

    .creeper-bg {
        background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23388e3c' fill-opacity='0.05'%3E%3Cpath d='M8 8h8v8H8zm16 0h8v8h-8zm-8 8h8v8h-8zm0 16h8v8h-8z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .honey-drop {
        width: 10px;
        height: 20px;
        background-color: #facc15;
        border-radius: 0 0 100% 100%;
        margin: 0 6px;
        animation: dripDown 1.5s infinite ease-in-out;
    }

    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }

    @keyframes dripDown {
        0% {
            transform: translateY(-8px) scaleY(0.5);
            opacity: 0.5;
        }
        50% {
            transform: translateY(8px) scaleY(1.2);
            opacity: 1;
        }
        100% {
            transform: translateY(-8px) scaleY(0.5);
            opacity: 0.5;
        }
    }

    .drip-strip {
        position: relative;
        justify-content: center;
    }

    :root {
        --bg-color: #ffffff;
        --text-color: #000000;
    }

    [data-theme="dark"] {
        --bg-color: #121212;
        --text-color: #ffffff;
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: 'Segoe UI', sans-serif;
        transition: background-color 0.3s ease, color 0.3s ease;
        margin: 0;
    }

    header {
        padding: 1rem;
        text-align: right;
    }

    button {
        padding: 0.5rem 1rem;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        background-color: #ddd;
        cursor: pointer;
    }

    button:hover {
        background-color: #ccc;
    }

    main {
        text-align: center;
        padding: 3rem;
    }

    /* ‚úÖ NEW: Logo style */
    .logo {
        display: block;
        margin: 0 auto;
        width: 300px;
        max-width: 90%;
        height: auto;
    }
            @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-5px); }
      40%, 80% { transform: translateX(5px); }
    }
    .animate-shake {
      animation: shake 0.4s ease;
    }
[data-theme="dark"] .minecraft-inventory {
  background-color: #1e1e1e !important;
  color: #f0f0f0 !important;
}
[data-theme="dark"] .bg-white {
  background-color: #2c2c2c !important;
}
[data-theme="dark"] .text-gray-800 {
  color: #ddd !important;
}
[data-theme="dark"] .btn-minecraft {
  background: linear-gradient(to bottom, #3d3d3d 0%, #2c2c2c 100%);
  color: #fff;
  border-color: #000;
}
/* Base styles */
:root {
  --bg-color: #f5f5f5; /* light default */
  --text-color: #111;
}

[data-theme="light"] body {
  background-image: url('surface-light.png');
  background-size: cover;
  background-attachment: fixed;
}

[data-theme="dark"] body {
  background-image: url('cave-dark.png');
  background-size: cover;
  background-attachment: fixed;
}


/* Apply background and text globally */
body {
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Optional: style modals/forms/containers */
.modal-content,
#auth-modal,
form,
.section-box {
  background-color: var(--bg-color);
  color: var(--text-color);
  border: 1px solid #ccc;
}

</style>

</head>
<body class="bg-green-100 text-gray-900 font-mono creeper-bg">

  <!-- ========================= -->
  <!-- üß± Sticky Header -->
  <!-- ========================= -->
  <header class="minecraft-inventory p-4 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">

      <!-- Logo + Title -->
      <div class="flex items-center space-x-3">
        <div class="w-12 h-12 gold-block rounded flex items-center justify-center">
          <span class="text-2xl">üêù</span>
        </div>
        <h1 class="minecraft-font text-2xl text-amber-900">HoneyPixelMC</h1>
      </div>

      <!-- Mobile Menu Toggle -->
      <button id="mobileMenuToggle" class="md:hidden btn-minecraft px-3 py-2 minecraft-font text-xs">‚ò∞ MENU</button>

      <!-- Desktop Nav Menu -->
      <nav id="navMenu" class="hidden md:flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-1 mt-4 md:mt-0">
        <a href="#home" class="btn-minecraft px-4 py-2 minecraft-font text-xs">HOME</a>
        <a href="#features" class="btn-minecraft px-4 py-2 minecraft-font text-xs">FEATURES</a>
        <a href="#events" class="btn-minecraft px-4 py-2 minecraft-font text-xs">EVENTS</a>
        <a href="#donate" class="btn-minecraft px-4 py-2 minecraft-font text-xs">DONATE</a>
      </nav>

      <!-- Auth / Shop / Discord -->
      <div id="auth-section" class="ml-4 flex items-center space-x-2">
        <button id="login-btn" class="btn-minecraft px-4 py-2 minecraft-font text-xs">LOGIN</button>
        <span id="user-info" class="minecraft-font text-xs text-amber-900 hidden"></span>
        <button id="logout-btn" class="btn-minecraft px-4 py-2 minecraft-font text-xs hidden">LOGOUT</button>
        <button id="theme-toggle">üåô Dark Mode</button>
        <button onclick="visitShop()">üõçÔ∏è Visit Shop</button>
        <a href="https://discord.gg/YU25e7Mn9b" class="btn-minecraft px-4 py-2 minecraft-font text-xs">JOIN DISCORD</a>
      </div>
    </div>
  </header>

  <!-- ========================= -->
  <!-- üõ†Ô∏è Developer Tools Section -->
  <!-- ========================= -->
  <section id="dev" class="hidden tab-content py-16 px-6 text-center">
    <div class="container mx-auto">
      <h2 class="minecraft-font text-3xl mb-6 text-green-700">üõ†Ô∏è Developer Tools</h2>
      <p class="font-mono text-gray-800">Manage users and view payments below:</p>

      <!-- User List -->
      <div id="user-list" class="mt-6 space-y-4 text-left max-w-2xl mx-auto font-mono text-sm">
        <p class="text-amber-800 minecraft-font mb-2">üîê User Accounts:</p>
        <div id="user-list-container">Loading users...</div>
      </div>

      <!-- Payment History -->
      <div id="payment-history" class="mt-10 space-y-4 text-left max-w-2xl mx-auto font-mono text-sm">
        <p class="text-amber-800 minecraft-font mb-2">üí∞ Payment Records:</p>
        <div id="payment-container">Select a user to view donations.</div>
      </div>
    </div>
  </section>

  <!-- ========================= -->
  <!-- üîê Login/Signup Modal -->
  <!-- ========================= -->
  <div id="auth-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 hidden">
    <div class="minecraft-inventory rounded-lg p-8 bg-white relative w-full max-w-xs">
      <button id="close-auth-modal" class="absolute top-2 right-2 text-xl font-bold">&times;</button>
      <h2 class="minecraft-font text-lg mb-4 text-center" id="auth-modal-title">Login</h2>
      <form id="auth-form" class="space-y-3">
        <input id="auth-email" type="email" required placeholder="Email" class="w-full p-2 border rounded minecraft-font text-xs" />
        <input id="auth-password" type="password" required placeholder="Password" class="w-full p-2 border rounded minecraft-font text-xs" />
        <button type="submit" class="btn-minecraft w-full py-2 minecraft-font text-xs" id="auth-submit-btn">Login</button>
      </form>
      <div class="text-center mt-3">
        <button id="toggle-auth-mode" class="minecraft-font text-xs text-blue-700 underline bg-transparent border-0">Need an account? Sign up</button>
      </div>
      <div class="text-center mt-3">
        <button id="google-auth-btn" class="btn-minecraft w-full py-2 minecraft-font text-xs">Sign in with Google</button>
      </div>
      <div id="auth-error" class="text-xs text-red-600 mt-2 text-center"></div>
    </div>
  </div>

</body>


<script>
// ========================
// ‚úÖ Firebase Setup
// ========================
const firebaseConfig = {
    apiKey: "AIzaSyCUJnt4VflBK5xqmmLWMSjzumpB9z6kUTY",
    authDomain: "honeypixel-1257f.firebaseapp.com",
    databaseURL: "https://honeypixel-1257f-default-rtdb.firebaseio.com/",
    projectId: "honeypixel-1257f",
    storageBucket: "honeypixel-1257f.firebasestorage.app",
    messagingSenderId: "650984530130",
    appId: "1:650984530130:web:f49ee907dbe91105764d0b",
    measurementId: "G-KMYDLCB0GX"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// ========================
// üñ• Server Status Updater
// ========================
async function updateServerInfo() {
    try {
        const response = await fetch("https://api.mcsrvstat.us/3/play.honeypixelmc.com");
        const data = await response.json();
        document.getElementById("playerCount").textContent = data.players?.online ?? "0";
        document.getElementById("maxPlayers").textContent = data.players?.max ?? "0";
        document.getElementById("onlineStatus").textContent = data.online ? "Online ‚úÖ" : "Offline ‚ùå";
        document.getElementById("version").textContent = data.version ?? "Unknown";
        document.getElementById("motd").textContent = data.motd?.clean?.join(' ') ?? "HoneyPixelMC";
        document.getElementById("serverVersion").textContent = data.version ?? "Unknown";
        document.getElementById("serverType").textContent = data.software?.toUpperCase() ?? "SURVIVAL";
    } catch (error) {
        console.error("Failed to fetch server info:", error);
    }
}
updateServerInfo();
setInterval(updateServerInfo, 15000);

// ========================
// üéõÔ∏è UI Elements
// ========================
const loginBtn = document.getElementById('login-btn');
const logoutBtn = document.getElementById('logout-btn');
const userInfo = document.getElementById('user-info');
const devTabs = document.getElementById('dev-tabs');
const tabContents = document.querySelectorAll('.tab-content');

let currentTab = null;

// ========================
// üîê Auth Modal Elements
// ========================
const authModal = document.getElementById('auth-modal');
const closeAuthModal = document.getElementById('close-auth-modal');
const authForm = document.getElementById('auth-form');
const authEmail = document.getElementById('auth-email');
const authPassword = document.getElementById('auth-password');
const authError = document.getElementById('auth-error');
const toggleAuthMode = document.getElementById('toggle-auth-mode');
const authModalTitle = document.getElementById('auth-modal-title');
const authSubmitBtn = document.getElementById('auth-submit-btn');
const googleAuthBtn = document.getElementById('google-auth-btn');

let isLoginMode = true;

// ========================
// üåô Light/Dark Theme Toggle
// ========================
const toggleBtn = document.getElementById("theme-toggle");
const root = document.documentElement;
const savedTheme = localStorage.getItem("theme") || "light";
root.setAttribute("data-theme", savedTheme);
toggleBtn.textContent = savedTheme === "dark" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";

toggleBtn.addEventListener("click", () => {
    const current = root.getAttribute("data-theme");
    const newTheme = current === "dark" ? "light" : "dark";
    root.setAttribute("data-theme", newTheme);
    localStorage.setItem("theme", newTheme);
    toggleBtn.textContent = newTheme === "dark" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
});

// ========================
// üß† Auth Modal Logic
// ========================
loginBtn.onclick = () => {
    authModal.classList.remove('hidden');
    isLoginMode = true;
    setAuthMode();
};
closeAuthModal.onclick = () => {
    authModal.classList.add('hidden');
    authError.textContent = '';
    authForm.reset();
};
toggleAuthMode.onclick = (e) => {
    e.preventDefault();
    isLoginMode = !isLoginMode;
    setAuthMode();
    authError.textContent = '';
    authForm.reset();
};
function setAuthMode() {
    if (isLoginMode) {
        authModalTitle.textContent = 'Login';
        authSubmitBtn.textContent = 'Login';
        toggleAuthMode.textContent = 'Need an account? Sign up';
    } else {
        authModalTitle.textContent = 'Sign Up';
        authSubmitBtn.textContent = 'Sign Up';
        toggleAuthMode.textContent = 'Already have an account? Login';
    }
}

// ========================
// üõ° Ensure Realtime DB User Record
// ========================
async function ensureUserInRealtimeDB(user) {
    if (!user) return;
    const userRef = db.ref('users/' + user.uid);
    const snapshot = await userRef.get();
    if (!snapshot.exists()) {
        await userRef.set({ email: user.email, role: "member" });
    }
}

// ========================
// üßæ Email/Password Submit
// ========================
authForm.onsubmit = async (e) => {
    e.preventDefault();
    authError.textContent = '';
    const email = authEmail.value;
    const password = authPassword.value;

    try {
        let userCredential;
        if (isLoginMode) {
            userCredential = await auth.signInWithEmailAndPassword(email, password);
        } else {
            userCredential = await auth.createUserWithEmailAndPassword(email, password);
            await ensureUserInRealtimeDB(userCredential.user);
        }
        authModal.classList.add('hidden');
        authForm.reset();
    } catch (err) {
        authError.textContent = err.message.replace('Firebase:', '');
        authError.classList.add("text-red-600", "font-bold");
        authForm.classList.add("animate-shake");
        setTimeout(() => authForm.classList.remove("animate-shake"), 500);
    }
};

// ========================
// üîê Google Login Handler
// ========================
googleAuthBtn.onclick = async (e) => {
    e.preventDefault();
    authError.textContent = '';
    try {
        const provider = new firebase.auth.GoogleAuthProvider();
        const result = await auth.signInWithPopup(provider);
        await ensureUserInRealtimeDB(result.user);
        authModal.classList.add('hidden');
        authForm.reset();
    } catch (err) {
        authError.textContent = err.message.replace('Firebase:', '');
        authError.classList.add("text-red-600", "font-bold");
        authForm.classList.add("animate-shake");
        setTimeout(() => authForm.classList.remove("animate-shake"), 500);
    }
};

// ========================
// üö™ Logout Handler
// ========================
logoutBtn.onclick = () => auth.signOut();

// ========================
// üö¶ Auth State Listener
// ========================
auth.onAuthStateChanged(async user => {
    console.log("Auth state changed:", user);

    // Safe reference for dev-tab
    const devTab = document.getElementById("dev-tab");

    if (user) {
        loginBtn.classList.add('hidden');
        logoutBtn.classList.remove('hidden');
        userInfo.classList.remove('hidden');
        userInfo.textContent = user.displayName || user.email;

        let role = "member";
        try {
            const userSnap = await db.ref('users/' + user.uid).get();
            if (userSnap.exists() && userSnap.val().role === "dev") {
                role = "dev";
            }
        } catch (e) {
            console.error("Error checking user role:", e);
        }

        if (role === "dev") {
            if (devTab) devTab.classList.remove("hidden");
            loadAllUsers(); // Load developer tools
        } else {
            if (devTab) devTab.classList.add("hidden");
        }

    } else {
        loginBtn.classList.remove('hidden');
        logoutBtn.classList.add('hidden');
        userInfo.classList.add('hidden');
        if (devTab) devTab.classList.add("hidden");
    }
});

</script>


</body>
</html>
